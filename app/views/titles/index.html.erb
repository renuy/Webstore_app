<%= javascript_tag :defer => 'defer' do -%>
	$(document).ready(function () {
		Collectionapp.initShelf('div_book_shelf');
	});
<% end -%>

<div class='span-24 prepend-top'>
  
  <div class='span-24 shelf_7_89' id="div_book_shelf" style="background: url(../images/7_89.png) no-repeat;display:none; padding:10px 0px 0px 10px;">
    <div class='span-24'>
      <div class='span-10 shelf-3'">
        <div id="title">
          <div class="title span-3">
              
              <p><%= link_to @shelf_name[0], refine_titles_path(:shelf=>@shelf_name[0], :query=>params[:query],:cat_id=> @cat_id[0],:per_page=>9, :page=>1) %></p>
          </div>
        </div>

        <p></p>
        <p><br/></p>
        <p>
        
        <% if @shelf0.size > 0 %>
        <% @shelf[0].each_hit_with_result do |hit, result| -%>
          
          <div class='span-3'>
            <%= link_to result do -%> 
              <%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
              <% end -%>
              (<%=hit.stored(:no_of_rented)%>)
            </div> 
        <% end -%>             
        <% end %>
        </p>      
      </div>
      <div class='span-3 shelf-1'>
        <div id="title">
          <div class="title span-2">
              <p><%= link_to @shelf_name[1], refine_titles_path(:shelf=>@shelf_name[1], :query=>params[:query],:cat_id=> @cat_id[1],:per_page=>9, :page=>1) %></p>
          </div>
        </div>

        <p></p>
        <p><br/></p>
        <p>
          <% if @shelf0.size > 1 %>
          <% @shelf[1].each_hit_with_result do |hit, result| -%>
          
          <div class='span-3'>
            <%= link_to result do -%> 
              <%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
              <% end -%>
              (<%=hit.stored(:no_of_rented)%>)
            </div> 
          <% end -%>             
          <% end %>
             
        </p>
      </div>
      <div class='span-7 shelf-2'>

        <div id="title">
          <div class="title span-2">
              <p><%= link_to @shelf_name[2], refine_titles_path(:shelf=>@shelf_name[2], :query=>params[:query],:cat_id=> @cat_id[2],:per_page=>9, :page=>1) %></p>
          </div>
        </div>
        
        <p></p>
        <p><br/></p>
        <p>
          <% if @shelf0.size > 2 %>
          <% @shelf[2].each_hit_with_result do |hit, result| -%>
          
          <div class='span-3'>
            <%= link_to result do -%> 
              <%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
              <% end -%>
              (<%=hit.stored(:no_of_rented)%>)
            </div> 
          <% end -%>             
          <% end %>   
        </p>      
            
      </div>  
          
      <div class='span-3 shelf-1'>
        <div id="title">
          <div class="title span-2">
            <p><%= link_to @shelf_name[3], refine_titles_path(:shelf=>@shelf_name[3], :query=>params[:query],:cat_id=> @cat_id[3],:per_page=>9, :page=>1) %></p>
          </div>
        </div>
        
        <p></p>
        <p><br/></p>
        <p>
          <% if @shelf0.size > 3 %>
          <% @shelf[3].each_hit_with_result do |hit, result| -%>
          
          <div class='span-3'>
            <%= link_to result do -%> 
              <%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
              <% end -%>
              (<%=hit.stored(:no_of_rented)%>)
            </div> 
          <% end -%>             
          <% end %>   
        </p>      
            
      </div>
    </div>
    
    <div class='span-24'>
      
      <div class='span-20'>
        <div id="title">
          <div class="title span-3">
              <p><%= link_to 'MOST READ', refine_titles_path(:shelf=>'MOST READ', :query=>params[:query],:per_page=>9, :page=>1) %></p>
          </div>
        </div>
        
        
        <p></p>
        <p><br/></p>
        <p>
        <div class="span-1">
        <br/>
        </div>
        <% @shelfMR.each_hit_with_result do |hit, result| -%>
          
          <div class='span-3'>
            <%= link_to result do -%> 
              <%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
              <% end -%>
              (<%=hit.stored(:no_of_rented)%>)
            </div> 
        <% end -%>
        
             
        </p>
      </div>
      
    </div>
    <div class='span-24'>
      <div class='span-20'>
        <div id="title">
          <div class="title span-3">
              <p><a>RESULTS</a></p>
          </div>
        </div>
        
        
        <p></p>
        <p><br/></p>
        <p>
        
        <% @searchResults.each_hit_with_result do |hit, result| -%>
          <div class='span-2 prepend-1'>
            <%= link_to result do -%> 
              <%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
            <% end -%>
            </div> 
        <% end -%>
        
             
        </p>
      </div>
      <div class='span-7 shelf-2'>

        
        <p></p>
        <p><br/></p>
        <p>
             
        </p>      
            
      </div>  
          
      <div class='span-3 shelf-1'>
          <p></p>
          <p><br/></p>
          <p>
          <!--div class='span-1'><br/> </div-->
          
            <div class='span-2  prepend-1'>
            </div> 
          
             
        </p>
      </div>
    </div>
  </div>
</div>
