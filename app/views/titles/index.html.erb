<%= javascript_tag :defer => 'defer' do -%>
	$(document).ready(function () {
		Collectionapp.initShelf('div_book_shelf');
	});
<% end -%>

<div class='span-24 prepend-top'>
  
  <div class='span-24 shelf_7_89' id="div_book_shelf" style="background: url(../images/7_89.png) no-repeat;display:none; padding:10px 0px 0px 10px;">
    <div class='span-24'>
      <div class='span-10 shelf-3'">
        <div id="title">
          <div class="title">
              <a>Category</a>
          </div>
        </div>

        <p></p>
        <p><br/></p>
        <p>
          
          <%= will_paginate @shelf0  %>
          <% @shelf0.each do |row| %>
            <div class='span-2 prepend-1'>
              <% unless row.instance.nil? -%>
              <%= link_to_function(row.instance.name) do |page|
                  page[:facetCategory].value = row.value;
                  page[:searchForm].submit();
              end unless row.instance.nil? -%> 
              (<%= row.count %>)
              <%= button_to_function('X') do |page| 
                  page[:facetCategory].value = nil;
                  page[:searchForm].submit();						
                  end if params[:facetCategory].to_i > 0 -%>
              <% end -%>
            </div> 
          <% end %>
             
        </p>      
      </div>
      <div class='span-3 shelf-1'>
        <p></p>
        <p><br/></p>
        <p>
          <!--div class='span-1'><br/> </div-->
             
        </p>
      </div>
      <div class='span-7 shelf-2'>

        <div id="title">
          <div class="title">
              <a>Author</a>
          </div>
        </div>
        
        <p></p>
        <p><br/></p>
        <p>
          <% @shelf1.each do |row| %>
            <div class='span-2 prepend-1'>
              <% unless row.instance.nil? -%>
              <%= link_to_function(row.instance.name) do |page|
                  page[:facetAuthor].value = row.value;
                  page[:searchForm].submit();
                end -%> 
              (<%= row.count %>)
              <%= button_to_function('X') do |page| 
                  page[:facetAuthor].value = nil;
                  page[:searchForm].submit();						
                end if params[:facetAuthor].to_i > 0 -%>
              <% end -%>
            </div> 
          <% end %>
             
        </p>      
            
      </div>  
          
      <div class='span-3 shelf-1'>
          <p></p>
          <p><br/></p>
          <p>
          <!--div class='span-1'><br/> </div-->
          
            <div class='span-2  prepend-1'>
            </div> 
          
             
        </p>
      </div>
    </div>
    
    <div class='span-24'>
      
      <div class='span-20'>
        <div id="title">
          <div class="title span-3">
              <p><%= link_to 'MOST READ', refine_titles_path(:query=>params[:query],:per_page=>9, :page=>1) %></p>
          </div>
        </div>
        
        
        <p></p>
        <p><br/></p>
        <p>
        <div class="span-1">
        <br/>
        </div>
        <% @shelfMR.each_hit_with_result do |hit, result| -%>
          <div class='span-3'><%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
              (<%=hit.stored(:no_of_rented)%>)
            </div> 
        <% end -%>
        
             
        </p>
      </div>
      
    </div>
    <div class='span-24'>
      <div class='span-20'>
        <div id="title">
          <div class="title span-3">
              <p><a>RESULTS</a></p>
          </div>
        </div>
        
        
        <p></p>
        <p><br/></p>
        <p>
        
        <% @searchResults.each_hit_with_result do |hit, result| -%>
          <div class='span-2 prepend-1'><%= image_tag image_url(result.id), :id=>"img_#{result.id}_#{result.id}", 
                :size => "50x70", :alt => "#{hit.stored(:title)} ", 
                :title => "#{hit.stored(:title)}", :onerror => "this.src='#{default_image_url}';"  %>
            </div> 
        <% end -%>
        
             
        </p>
      </div>
      <div class='span-7 shelf-2'>

        
        <p></p>
        <p><br/></p>
        <p>
             
        </p>      
            
      </div>  
          
      <div class='span-3 shelf-1'>
          <p></p>
          <p><br/></p>
          <p>
          <!--div class='span-1'><br/> </div-->
          
            <div class='span-2  prepend-1'>
            </div> 
          
             
        </p>
      </div>
    </div>
  </div>
</div>
